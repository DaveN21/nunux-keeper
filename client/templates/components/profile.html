<div class="profile">
  <header>
    <span class="avatar">
      <img ng-src="{{user.uid | gravatar}}" alt="{{user.uid}}" title="{{user.uid}} on Gravatar" />
    </span>
    <span>
      <h1>{{ user.username || user.uid }}</h1>
      <p>Member since {{ user.date | fromNow }}</p>
    </span>
    <a href="/logout" class="btn btn-danger logout" title="Logout">
      <span class="glyphicon glyphicon-off"></span>
    </a>
  </header>
  <hr/>
  <section>
    <h2>Bookmarklet</h2>
    <p>Drag and drop the link bellow in your toolbar.</p>
    <a href="javascript:(function(){K_REALM='{{ realm }}';K_SCR=document.createElement('SCRIPT');
      K_SCR.type='text/javascript';K_SCR.src=K_REALM+'/bookmarklet.js';
      document.getElementsByTagName('head')[0].appendChild(K_SCR)})();"
      onclick="alert('Don\'t click on me, but drag me.');return false;" title="Drag me in your toolbar!" class="bookmarklet">Keep This!</a>
  </section>
  <section>
    <h2>Public page</h2>
    <p>Documents in public category are published on your public page.</p>
    <p>
    <a href="{{realm}}/public/{{user.publicAlias}}" target="_blank" title="Your public page">
      {{realm}}/public/{{user.publicAlias}}
    </a>
    &nbsp;
    <a class="pointer" ng-click="editUserDialog(user)" title="Edit your public alias">[edit]</a>
    </p>
  </section>
  <section>
    <h2>Granted Applications</h2>
    <p ng-if="!apps.length">No application granted to access your account.</p>
    <p ng-if="apps.length">You have {{ apps.length }} application(s) granted to access your account:</p>
    <ul>
      <li ng-repeat="app in apps"><a href="{{ app.homepage }}" target="_blank">{{ app.name }}</a></li>
    </ul>
  </section>
  <section>
    <h2>Twitter</h2>
    <p ng-if="!user.twitter">
    Connect Twitter with your account.
    Once activated, you will be able to keep a tweet thanks to the hash tag #keep.
    <a href="/api/user/{{user.uid}}/connect/twitter" title="Connect with Twitter">[connect]</a>
    </p>
    <p ng-if="user.twitter">
    Your are linked with <strong>@{{user.twitter.screen_name}}</strong> Twitter account.<br>
    You can keep a tweet by adding the hash tag #keep.
    If the tweet contain an url, the targeted resource will be saved.
    <a href="/api/user/{{user.uid}}/disconnect/twitter" title="Disconnect from Twitter">[disconnect]</a>
    </p>
  </section>
</div>

<script type="text/ng-template" id="templates/dialog/user/edit.html">
<div class="modal-header">
  <h3>Edit user: {{ user.username }}</h3>
</div>
<div class="modal-body">
  <form role="form" ng-submit="ok()">
    <div class="form-group">
      <label for="publicAlias">Public page alias</label>
      <input type="text" class="form-control" id="publicAlias" placeholder="Enter your public alias" ng-model="user.publicAlias">
    </div>
  </form>
</div>
<div class="modal-footer">
  <button class="btn btn-primary" ng-click="ok()">OK</button>
  <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
</div>
</script>

